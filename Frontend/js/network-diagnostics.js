// Network diagnostic utility for IPL Auction
function runNetworkDiagnostics() {\n  console.log('üîç Running Network Diagnostics...');\n  \n  const diagnostics = {\n    serverReachable: false,\n    socketConnection: false,\n    networkInfo: {},\n    errors: []\n  };\n  \n  // Test 1: Check if server is reachable\n  fetch('/api/rooms', { \n    method: 'GET',\n    timeout: 5000 \n  })\n  .then(response => {\n    if (response.ok) {\n      diagnostics.serverReachable = true;\n      console.log('‚úÖ Server is reachable');\n    } else {\n      diagnostics.errors.push('Server responded with error: ' + response.status);\n    }\n  })\n  .catch(error => {\n    diagnostics.errors.push('Cannot reach server: ' + error.message);\n    console.log('‚ùå Server not reachable:', error);\n  })\n  .finally(() => {\n    // Test 2: Check socket connection\n    if (window.io) {\n      const testSocket = io(window.location.origin, {\n        transports: ['websocket', 'polling'],\n        timeout: 5000\n      });\n      \n      testSocket.on('connect', () => {\n        diagnostics.socketConnection = true;\n        console.log('‚úÖ Socket connection successful');\n        testSocket.disconnect();\n        displayDiagnostics(diagnostics);\n      });\n      \n      testSocket.on('connect_error', (error) => {\n        diagnostics.errors.push('Socket connection failed: ' + error.message);\n        console.log('‚ùå Socket connection failed:', error);\n        displayDiagnostics(diagnostics);\n      });\n      \n      setTimeout(() => {\n        if (!diagnostics.socketConnection) {\n          diagnostics.errors.push('Socket connection timeout');\n          testSocket.disconnect();\n          displayDiagnostics(diagnostics);\n        }\n      }, 5000);\n    } else {\n      diagnostics.errors.push('Socket.IO library not loaded');\n      displayDiagnostics(diagnostics);\n    }\n  });\n  \n  // Get network information\n  diagnostics.networkInfo = {\n    userAgent: navigator.userAgent,\n    online: navigator.onLine,\n    url: window.location.href,\n    protocol: window.location.protocol,\n    host: window.location.host\n  };\n}\n\nfunction displayDiagnostics(diagnostics) {\n  console.log('üìä Diagnostic Results:', diagnostics);\n  \n  const modal = document.createElement('div');\n  modal.style.cssText = `\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0,0,0,0.8);\n    z-index: 10000;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  `;\n  \n  const content = document.createElement('div');\n  content.style.cssText = `\n    background: #1a1a1a;\n    color: white;\n    padding: 20px;\n    border-radius: 10px;\n    max-width: 500px;\n    max-height: 80vh;\n    overflow-y: auto;\n    border: 2px solid #ff8c00;\n  `;\n  \n  let html = `\n    <h3 style=\"color: #ff8c00; margin-top: 0;\">üîç Network Diagnostics</h3>\n    <div style=\"margin-bottom: 15px;\">\n      <strong>Server Status:</strong> ${diagnostics.serverReachable ? '‚úÖ Reachable' : '‚ùå Not Reachable'}<br>\n      <strong>Socket Status:</strong> ${diagnostics.socketConnection ? '‚úÖ Connected' : '‚ùå Failed'}<br>\n      <strong>Browser:</strong> ${navigator.onLine ? '‚úÖ Online' : '‚ùå Offline'}\n    </div>\n  `;\n  \n  if (diagnostics.errors.length > 0) {\n    html += `\n      <div style=\"margin-bottom: 15px;\">\n        <strong style=\"color: #f44336;\">Errors Found:</strong>\n        <ul style=\"margin: 5px 0; padding-left: 20px;\">\n    `;\n    diagnostics.errors.forEach(error => {\n      html += `<li style=\"color: #f44336;\">${error}</li>`;\n    });\n    html += `</ul></div>`;\n  }\n  \n  html += `\n    <div style=\"margin-bottom: 15px;\">\n      <strong>Troubleshooting Steps:</strong>\n      <ol style=\"margin: 5px 0; padding-left: 20px; font-size: 14px;\">\n        <li>Make sure the server is running (run start-server.bat)</li>\n        <li>Check if port 3000 is blocked by firewall</li>\n        <li>Ensure all devices are on the same WiFi network</li>\n        <li>Try refreshing the page</li>\n        <li>Use your computer's IP address instead of localhost</li>\n      </ol>\n    </div>\n    <div style=\"text-align: center;\">\n      <button onclick=\"this.parentElement.parentElement.parentElement.remove()\" \n              style=\"background: #ff8c00; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;\">\n        Close\n      </button>\n    </div>\n  `;\n  \n  content.innerHTML = html;\n  modal.appendChild(content);\n  document.body.appendChild(modal);\n}\n\n// Add diagnostic button to the page\nfunction addDiagnosticButton() {\n  const button = document.createElement('button');\n  button.textContent = 'üîç Network Diagnostics';\n  button.style.cssText = `\n    position: fixed;\n    bottom: 20px;\n    right: 20px;\n    background: #ff8c00;\n    color: white;\n    border: none;\n    padding: 10px 15px;\n    border-radius: 5px;\n    cursor: pointer;\n    z-index: 1000;\n    font-size: 12px;\n  `;\n  button.onclick = runNetworkDiagnostics;\n  document.body.appendChild(button);\n}\n\n// Auto-run diagnostics if connection fails\nlet connectionFailureCount = 0;\nfunction checkConnectionHealth() {\n  if (socket && !socket.connected) {\n    connectionFailureCount++;\n    if (connectionFailureCount >= 3) {\n      console.log('Multiple connection failures detected, running diagnostics...');\n      runNetworkDiagnostics();\n      connectionFailureCount = 0;\n    }\n  } else {\n    connectionFailureCount = 0;\n  }\n}\n\n// Add diagnostic button when page loads\ndocument.addEventListener('DOMContentLoaded', () => {\n  addDiagnosticButton();\n  \n  // Check connection health every 10 seconds\n  setInterval(checkConnectionHealth, 10000);\n});